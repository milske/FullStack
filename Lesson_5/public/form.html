<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script>
      window.onload = (event) => {
        var sendButton = document.getElementById("myButton");
        sendButton.addEventListener("click", function () {
          var email = document.getElementById("email").value;
          var pass = document.getElementById("pass").value;

          console.log(email);
          // we create AJAX object which is waiting repsponse

          var xmlhttp = new XMLHttpRequest();
          xmlhttp.onreadystatechange();
          {
            if (this.readyState == 4 && this.status == 200) {
              //response data will be shown in status fiel
              document.getElementById("status").innerHTML = this.responseText;
              console.log(this.responseText);
              //alert(this.responseText);
              if (this.responseText == "SECRET PAGE") {
                console.log("true");
                console.log();
                window.open("./secretpage.html");
              }
            }
          }
          // send AJAX request, type is POST
          xmlhttp.open("POST", "signin", true);
          // we create AJAX parameters and the data fiels
          xmlhttp.setRequestHeader(
            "Content-type",
            "application/x-www-form-urlencoded"
          );
          xmlhttp.send("email=" + email + "&pass=" + pass);
        });
      };
    </script>
  </head>
  <body>
    <div>
      <form method="post" action="signin">
        <div class="form-group">
          <label for="exampleInputEmail1">Email address</label>
          <input
            type="email"
            class="form-control"
            id="email"
            aria-describedby="emailHelp"
            placeholder="Enter email"
            name="email"
          />
        </div>

        <div class="form-group">
          <label for="exampleInputPassword1">Password</label>
          <input
            type="password"
            class="form-control"
            id="pass"
            placeholder="Password"
            name="pass"
          />
        </div>
        <button type="button" id="myButton" class="btn btn-primary">
          Submit
        </button>
        <div id="status" class="form-group"></div>
      </form>
    </div>
  </body>
</html>
